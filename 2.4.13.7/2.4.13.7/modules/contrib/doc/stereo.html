<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33108845-1']);
  _gaq.push(['_setDomainName', 'opencv.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Stereo Correspondence &mdash; OpenCV 2.4.13.7 documentation</title>
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.4.13.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="OpenCV 2.4.13.7 documentation" href="../../../index.html" />
    <link rel="up" title="contrib. Contributed/Experimental Stuff" href="contrib.html" />
    <link rel="next" title="FaceRecognizer - Face Recognition with OpenCV" href="facerec/index.html" />
    <link rel="prev" title="contrib. Contributed/Experimental Stuff" href="contrib.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="facerec/index.html" title="FaceRecognizer - Face Recognition with OpenCV"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="contrib.html" title="contrib. Contributed/Experimental Stuff"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">OpenCV 2.4.13.7 documentation</a> &raquo;</li>
          <li><a href="../../refman.html" >OpenCV API Reference</a> &raquo;</li>
          <li><a href="contrib.html" accesskey="U">contrib. Contributed/Experimental Stuff</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
  
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="stereo-correspondence">
<h1>Stereo Correspondence<a class="headerlink" href="#stereo-correspondence" title="Permalink to this headline">¶</a></h1>
<div class="section" id="stereovar">
<h2>StereoVar<a class="headerlink" href="#stereovar" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="StereoVar">
<em class="property">class </em><code class="descname">StereoVar</code><a class="headerlink" href="#StereoVar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Class for computing stereo correspondence using the variational matching algorithm</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">class</span> <span class="nc">StereoVar</span>
<span class="p">{</span>
    <span class="n">StereoVar</span><span class="p">();</span>
    <span class="n">StereoVar</span><span class="p">(</span>    <span class="kt">int</span> <span class="n">levels</span><span class="p">,</span> <span class="kt">double</span> <span class="n">pyrScale</span><span class="p">,</span>
                                    <span class="kt">int</span> <span class="n">nIt</span><span class="p">,</span> <span class="kt">int</span> <span class="n">minDisp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">maxDisp</span><span class="p">,</span>
                                    <span class="kt">int</span> <span class="n">poly_n</span><span class="p">,</span> <span class="kt">double</span> <span class="n">poly_sigma</span><span class="p">,</span> <span class="kt">float</span> <span class="n">fi</span><span class="p">,</span>
                                    <span class="kt">float</span> <span class="n">lambda</span><span class="p">,</span> <span class="kt">int</span> <span class="n">penalization</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cycle</span><span class="p">,</span>
                                    <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">StereoVar</span><span class="p">();</span>

    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">operator</span><span class="p">()(</span><span class="n">InputArray</span> <span class="n">left</span><span class="p">,</span> <span class="n">InputArray</span> <span class="n">right</span><span class="p">,</span> <span class="n">OutputArray</span> <span class="n">disp</span><span class="p">);</span>

    <span class="kt">int</span>        <span class="n">levels</span><span class="p">;</span>
    <span class="kt">double</span>    <span class="n">pyrScale</span><span class="p">;</span>
    <span class="kt">int</span>        <span class="n">nIt</span><span class="p">;</span>
    <span class="kt">int</span>        <span class="n">minDisp</span><span class="p">;</span>
    <span class="kt">int</span>        <span class="n">maxDisp</span><span class="p">;</span>
    <span class="kt">int</span>        <span class="n">poly_n</span><span class="p">;</span>
    <span class="kt">double</span>    <span class="n">poly_sigma</span><span class="p">;</span>
    <span class="kt">float</span>    <span class="n">fi</span><span class="p">;</span>
    <span class="kt">float</span>    <span class="n">lambda</span><span class="p">;</span>
    <span class="kt">int</span>        <span class="n">penalization</span><span class="p">;</span>
    <span class="kt">int</span>        <span class="n">cycle</span><span class="p">;</span>
    <span class="kt">int</span>        <span class="n">flags</span><span class="p">;</span>

    <span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The class implements the modified S. G. Kosov algorithm <a class="reference internal" href="#kts09" id="id1">[KTS09]</a> that differs from the original one as follows:</p>
<blockquote>
<div><ul class="simple">
<li>The automatic initialization of method&#8217;s parameters is added.</li>
<li>The method of Smart Iteration Distribution (SID) is implemented.</li>
<li>The support of Multi-Level Adaptation Technique (MLAT) is not included.</li>
<li>The method of dynamic adaptation of method&#8217;s parameters is not included.</li>
</ul>
</div></blockquote>
<table class="docutils citation" frame="void" id="kts09" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[KTS09]</a></td><td>Sergey Kosov, Thorsten Thormählen and Hans-Peter Seidel: Accurate real-time disparity estimation with variational methods. In: Advances in Visual Computing. Springer Berlin Heidelberg, 2009. 796-807.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="stereovar-stereovar">
<h2>StereoVar::StereoVar<a class="headerlink" href="#stereovar-stereovar" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="StereoVar::StereoVar()">
<strong>C++:</strong><code class="descname"> </code> <code class="descclassname">StereoVar::</code><code class="descname">StereoVar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#StereoVar::StereoVar()" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="StereoVar::StereoVar(int levels, double pyrScale, int nIt, int minDisp, int maxDisp, int poly_n, double poly_sigma, float fi, float lambda, int penalization, int cycle, int flags)">
<strong>C++:</strong><code class="descname"> </code> <code class="descclassname">StereoVar::</code><code class="descname">StereoVar</code><span class="sig-paren">(</span>int <strong>levels</strong>, double <strong>pyrScale</strong>, int <strong>nIt</strong>, int <strong>minDisp</strong>, int <strong>maxDisp</strong>, int <strong>poly_n</strong>, double <strong>poly_sigma</strong>, float <strong>fi</strong>, float <strong>lambda</strong>, int <strong>penalization</strong>, int <strong>cycle</strong>, int <strong>flags</strong><span class="sig-paren">)</span><a class="headerlink" href="#StereoVar::StereoVar(int levels, double pyrScale, int nIt, int minDisp, int maxDisp, int poly_n, double poly_sigma, float fi, float lambda, int penalization, int cycle, int flags)" title="Permalink to this definition">¶</a></dt>
<dd><p>The constructor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>levels</strong> &#8211; The number of pyramid layers, including the initial image. levels=1 means that no extra layers are created and only the original images are used. This parameter is ignored if flag USE_AUTO_PARAMS is set.</li>
<li><strong>pyrScale</strong> &#8211; Specifies the image scale (&lt;1) to build the pyramids for each image. pyrScale=0.5 means the classical pyramid, where each next layer is twice smaller than the previous. (This parameter is ignored if flag USE_AUTO_PARAMS is set).</li>
<li><strong>nIt</strong> &#8211; The number of iterations the algorithm does at each pyramid level. (If the flag USE_SMART_ID is set, the number of iterations will be redistributed in such a way, that more iterations will be done on more coarser levels.)</li>
<li><strong>minDisp</strong> &#8211; Minimum possible disparity value. Could be negative in case the left and right input images change places.</li>
<li><strong>maxDisp</strong> &#8211; Maximum possible disparity value.</li>
<li><strong>poly_n</strong> &#8211; Size of the pixel neighbourhood used to find polynomial expansion in each pixel. The larger values mean that the image will be approximated with smoother surfaces, yielding more robust algorithm and more blurred motion field. Typically, poly_n = 3, 5 or 7</li>
<li><strong>poly_sigma</strong> &#8211; Standard deviation of the Gaussian that is used to smooth derivatives that are used as a basis for the polynomial expansion. For poly_n=5 you can set poly_sigma=1.1 , for poly_n=7 a good value would be poly_sigma=1.5</li>
<li><strong>fi</strong> &#8211; The smoothness parameter, ot the weight coefficient for the smoothness term.</li>
<li><strong>lambda</strong> &#8211; The threshold parameter for edge-preserving smoothness. (This parameter is ignored if PENALIZATION_CHARBONNIER or PENALIZATION_PERONA_MALIK is used.)</li>
<li><strong>penalization</strong> &#8211; Possible values: PENALIZATION_TICHONOV - linear smoothness; PENALIZATION_CHARBONNIER - non-linear edge preserving smoothness; PENALIZATION_PERONA_MALIK - non-linear edge-enhancing smoothness. (This parameter is ignored if flag USE_AUTO_PARAMS is set).</li>
<li><strong>cycle</strong> &#8211; Type of the multigrid cycle. Possible values: CYCLE_O and CYCLE_V for null- and v-cycles respectively. (This parameter is ignored if flag USE_AUTO_PARAMS is set).</li>
<li><strong>flags</strong> &#8211; <p>The operation flags; can be a combination of the following:</p>
<ul>
<li>USE_INITIAL_DISPARITY: Use the input flow as the initial flow approximation.</li>
<li>USE_EQUALIZE_HIST: Use the histogram equalization in the pre-processing phase.</li>
<li>USE_SMART_ID: Use the smart iteration distribution (SID).</li>
<li>USE_AUTO_PARAMS: Allow the method to initialize the main parameters.</li>
<li>USE_MEDIAN_FILTERING: Use the median filer of the solution in the post processing phase.</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>The first constructor initializes <code class="docutils literal"><span class="pre">StereoVar</span></code> with all the default parameters. So, you only have to set <code class="docutils literal"><span class="pre">StereoVar::maxDisp</span></code> and / or <code class="docutils literal"><span class="pre">StereoVar::minDisp</span></code> at minimum. The second constructor enables you to set each parameter to a custom value.</p>
</div>
<div class="section" id="stereovar-operator">
<h2>StereoVar::operator ()<a class="headerlink" href="#stereovar-operator" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="void StereoVar::operator()(const Mat&amp; left, const Mat&amp; right, Mat&amp; disp)">
<strong>C++:</strong><code class="descname"> </code>void <code class="descclassname">StereoVar::</code><code class="descname">operator()</code><span class="sig-paren">(</span>const Mat&amp; <strong>left</strong>, const Mat&amp; <strong>right</strong>, Mat&amp; <strong>disp</strong><span class="sig-paren">)</span><a class="headerlink" href="#void StereoVar::operator()(const Mat& left, const Mat& right, Mat& disp)" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes disparity using the variational algorithm for a rectified stereo pair.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left</strong> &#8211; Left 8-bit single-channel or 3-channel image.</li>
<li><strong>right</strong> &#8211; Right image of the same size and the same type as the left one.</li>
<li><strong>disp</strong> &#8211; Output disparity map. It is a 8-bit signed single-channel image of the same size as the input image.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>The method executes the variational algorithm on a rectified stereo pair. See <code class="docutils literal"><span class="pre">stereo_match.cpp</span></code> OpenCV sample on how to prepare images and call the method.</p>
<p><strong>Note</strong>:</p>
<p>The method is not constant, so you should not use the same <code class="docutils literal"><span class="pre">StereoVar</span></code> instance from different threads simultaneously.</p>
</div>
</div>


          </div>
          <div class="feedback">
              <h2>Help and Feedback</h2>
              You did not find what you were looking for?
              <ul>
                  
                  
                  
                  <li>Ask a question on the <a href="http://answers.opencv.org">Q&A forum</a>.</li>
                  <li>If you think something is missing or wrong in the documentation,
                  please file a <a href="http://code.opencv.org">bug report</a>.</li>
              </ul>
          </div>
        </div>
      </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/opencv-logo-white.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
      <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </p>
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Stereo Correspondence</a><ul>
<li><a class="reference internal" href="#stereovar">StereoVar</a></li>
<li><a class="reference internal" href="#stereovar-stereovar">StereoVar::StereoVar</a></li>
<li><a class="reference internal" href="#stereovar-operator">StereoVar::operator ()</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="contrib.html"
                        title="previous chapter">contrib. Contributed/Experimental Stuff</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="facerec/index.html"
                        title="next chapter">FaceRecognizer - Face Recognition with OpenCV</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/modules/contrib/doc/stereo.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="facerec/index.html" title="FaceRecognizer - Face Recognition with OpenCV"
             >next</a> |</li>
        <li class="right" >
          <a href="contrib.html" title="contrib. Contributed/Experimental Stuff"
             >previous</a> |</li>
        <li><a href="../../../index.html">OpenCV 2.4.13.7 documentation</a> &raquo;</li>
          <li><a href="../../refman.html" >OpenCV API Reference</a> &raquo;</li>
          <li><a href="contrib.html" >contrib. Contributed/Experimental Stuff</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2014, opencv dev team.
      Last updated on Jul 12, 2018.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>