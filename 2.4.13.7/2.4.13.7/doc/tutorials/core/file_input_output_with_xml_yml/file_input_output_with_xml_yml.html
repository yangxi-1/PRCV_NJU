<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33108845-1']);
  _gaq.push(['_setDomainName', 'opencv.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>File Input and Output using XML and YAML files &mdash; OpenCV 2.4.13.7 documentation</title>
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '2.4.13.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="OpenCV 2.4.13.7 documentation" href="../../../../index.html" />
    <link rel="up" title="core module. The Core Functionality" href="../table_of_content_core/table_of_content_core.html" />
    <link rel="next" title="Interoperability with OpenCV 1" href="../interoperability_with_OpenCV_1/interoperability_with_OpenCV_1.html" />
    <link rel="prev" title="Discrete Fourier Transform" href="../discrete_fourier_transform/discrete_fourier_transform.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../interoperability_with_OpenCV_1/interoperability_with_OpenCV_1.html" title="Interoperability with OpenCV 1"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../discrete_fourier_transform/discrete_fourier_transform.html" title="Discrete Fourier Transform"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../../index.html">OpenCV 2.4.13.7 documentation</a> &raquo;</li>
          <li><a href="../../tutorials.html" >OpenCV Tutorials</a> &raquo;</li>
          <li><a href="../table_of_content_core/table_of_content_core.html" accesskey="U"><em>core</em> module. The Core Functionality</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
  
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="file-input-and-output-using-xml-and-yaml-files">
<span id="fileinputoutputxmlyaml"></span><h1>File Input and Output using XML and YAML files<a class="headerlink" href="#file-input-and-output-using-xml-and-yaml-files" title="Permalink to this headline">¶</a></h1>
<div class="section" id="goal">
<h2>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¶</a></h2>
<p>You&#8217;ll find answers for the following questions:</p>
<div class="enumeratevisibleitemswithsquare container">
<ul class="simple">
<li>How to print and read text entries to a file and OpenCV using YAML or XML files?</li>
<li>How to do the same for OpenCV data structures?</li>
<li>How to do this for your data structures?</li>
<li>Usage of OpenCV data structures such as <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filestorage">FileStorage</a>, <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filenode">FileNode</a> or <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filenodeiterator">FileNodeIterator</a>.</li>
</ul>
</div>
</div>
<div class="section" id="source-code">
<h2>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>You can <a class="reference download internal" href="../../../../_downloads/file_input_output.cpp" download=""><code class="xref download docutils literal"><span class="pre">download</span> <span class="pre">this</span> <span class="pre">from</span> <span class="pre">here</span></code></a> or find it in the <code class="file docutils literal"><span class="pre">samples/cpp/tutorial_code/core/file_input_output/file_input_output.cpp</span></code> of the OpenCV source code library.</p>
<p>Here&#8217;s a sample code of how to achieve all the stuff enumerated at the goal list.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include</span> <span class="cpf">&lt;opencv2/core/core.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyData</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">MyData</span><span class="p">()</span> <span class="o">:</span> <span class="n">A</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">X</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">id</span><span class="p">()</span>
    <span class="p">{}</span>
    <span class="k">explicit</span> <span class="n">MyData</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">:</span> <span class="n">A</span><span class="p">(</span><span class="mi">97</span><span class="p">),</span> <span class="n">X</span><span class="p">(</span><span class="n">CV_PI</span><span class="p">),</span> <span class="n">id</span><span class="p">(</span><span class="s">&quot;mydata1234&quot;</span><span class="p">)</span> <span class="c1">// explicit to avoid implicit conversion</span>
    <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">write</span><span class="p">(</span><span class="n">FileStorage</span><span class="o">&amp;</span> <span class="n">fs</span><span class="p">)</span> <span class="k">const</span>                        <span class="c1">//Write serialization for this class</span>
    <span class="p">{</span>
        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;{&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">A</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;X&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">X</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;id&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">id</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;}&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">read</span><span class="p">(</span><span class="k">const</span> <span class="n">FileNode</span><span class="o">&amp;</span> <span class="n">node</span><span class="p">)</span>                          <span class="c1">//Read serialization for this class</span>
    <span class="p">{</span>
        <span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">node</span><span class="p">[</span><span class="s">&quot;A&quot;</span><span class="p">];</span>
        <span class="n">X</span> <span class="o">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">node</span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">];</span>
        <span class="n">id</span> <span class="o">=</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span><span class="n">node</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">];</span>
    <span class="p">}</span>
<span class="k">public</span><span class="o">:</span>   <span class="c1">// Data Members</span>
    <span class="kt">int</span> <span class="n">A</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">X</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">id</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">//These write and read functions must be defined for the serialization in FileStorage to work</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">write</span><span class="p">(</span><span class="n">FileStorage</span><span class="o">&amp;</span> <span class="n">fs</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">MyData</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">x</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">fs</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">read</span><span class="p">(</span><span class="k">const</span> <span class="n">FileNode</span><span class="o">&amp;</span> <span class="n">node</span><span class="p">,</span> <span class="n">MyData</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="k">const</span> <span class="n">MyData</span><span class="o">&amp;</span> <span class="n">default_value</span> <span class="o">=</span> <span class="n">MyData</span><span class="p">()){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">default_value</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">x</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// This function will print our custom class to the console</span>
<span class="k">static</span> <span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">,</span> <span class="k">const</span> <span class="n">MyData</span><span class="o">&amp;</span> <span class="n">m</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;{ id = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">id</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span><span class="p">;</span>
    <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;X = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">X</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span><span class="p">;</span>
    <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">.</span><span class="n">A</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;}&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">out</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">ac</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">av</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ac</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">help</span><span class="p">(</span><span class="n">av</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">string</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">av</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">{</span> <span class="c1">//write</span>
        <span class="n">Mat</span> <span class="n">R</span> <span class="o">=</span> <span class="n">Mat_</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;::</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
            <span class="n">T</span> <span class="o">=</span> <span class="n">Mat_</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">MyData</span> <span class="nf">m</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

        <span class="n">FileStorage</span> <span class="nf">fs</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FileStorage</span><span class="o">::</span><span class="n">WRITE</span><span class="p">);</span>

        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;iterationNr&quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">100</span><span class="p">;</span>
        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strings&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;[&quot;</span><span class="p">;</span>                              <span class="c1">// text - string sequence</span>
        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;image1.jpg&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Awesomeness&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;baboon.jpg&quot;</span><span class="p">;</span>
        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;]&quot;</span><span class="p">;</span>                                           <span class="c1">// close sequence</span>

        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Mapping&quot;</span><span class="p">;</span>                              <span class="c1">// text - mapping</span>
        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;{&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;One&quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">fs</span> <span class="o">&lt;&lt;</span>        <span class="s">&quot;Two&quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;}&quot;</span><span class="p">;</span>

        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;R&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">R</span><span class="p">;</span>                                      <span class="c1">// cv::Mat</span>
        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;T&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">T</span><span class="p">;</span>

        <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;MyData&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">;</span>                                <span class="c1">// your own data structures</span>

        <span class="n">fs</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>                                       <span class="c1">// explicit close</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Write Done.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">{</span><span class="c1">//read</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Reading: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">FileStorage</span> <span class="n">fs</span><span class="p">;</span>
        <span class="n">fs</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FileStorage</span><span class="o">::</span><span class="n">READ</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">itNr</span><span class="p">;</span>
        <span class="c1">//fs[&quot;iterationNr&quot;] &gt;&gt; itNr;</span>
        <span class="n">itNr</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">fs</span><span class="p">[</span><span class="s">&quot;iterationNr&quot;</span><span class="p">];</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">itNr</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fs</span><span class="p">.</span><span class="n">isOpened</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Failed to open &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">filename</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="n">help</span><span class="p">(</span><span class="n">av</span><span class="p">);</span>
            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">FileNode</span> <span class="n">n</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s">&quot;strings&quot;</span><span class="p">];</span>                         <span class="c1">// Read string sequence - Get node</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="o">!=</span> <span class="n">FileNode</span><span class="o">::</span><span class="n">SEQ</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strings is not a sequence! FAIL&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">FileNodeIterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">n</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">it_end</span> <span class="o">=</span> <span class="n">n</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="c1">// Go through the node</span>
        <span class="k">for</span> <span class="p">(;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">it_end</span><span class="p">;</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span><span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>


        <span class="n">n</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s">&quot;Mapping&quot;</span><span class="p">];</span>                                <span class="c1">// Read mappings from a sequence</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Two  &quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">n</span><span class="p">[</span><span class="s">&quot;Two&quot;</span><span class="p">])</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;; &quot;</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;One  &quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">n</span><span class="p">[</span><span class="s">&quot;One&quot;</span><span class="p">])</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>


        <span class="n">MyData</span> <span class="n">m</span><span class="p">;</span>
        <span class="n">Mat</span> <span class="n">R</span><span class="p">,</span> <span class="n">T</span><span class="p">;</span>

        <span class="n">fs</span><span class="p">[</span><span class="s">&quot;R&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">R</span><span class="p">;</span>                                      <span class="c1">// Read cv::Mat</span>
        <span class="n">fs</span><span class="p">[</span><span class="s">&quot;T&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">T</span><span class="p">;</span>
        <span class="n">fs</span><span class="p">[</span><span class="s">&quot;MyData&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>                                 <span class="c1">// Read your own structure_</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;R = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">R</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;T = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">T</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;MyData = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

        <span class="c1">//Show default behavior for non existing nodes</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Attempt to read NonExisting (should initialize the data structure with its default).&quot;</span><span class="p">;</span>
        <span class="n">fs</span><span class="p">[</span><span class="s">&quot;NonExisting&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;NonExisting = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
        <span class="o">&lt;&lt;</span> <span class="s">&quot;Tip: Open up &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">filename</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; with a text editor to see the serialized data.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="explanation">
<h2>Explanation<a class="headerlink" href="#explanation" title="Permalink to this headline">¶</a></h2>
<p>Here we talk only about XML and YAML file inputs. Your output (and its respective input) file may have only one of these extensions and the structure coming from this. They are two kinds of data structures you may serialize: <em>mappings</em> (like the STL map) and <em>element sequence</em> (like the STL vector). The difference between these is that in a map every element has a unique name through what you may access it. For sequences you need to go through them to query a specific item.</p>
<ol class="arabic">
<li><p class="first"><strong>XML/YAML File Open and Close.</strong> Before you write any content to such file you need to open it and at the end to close it. The XML/YAML data structure in OpenCV is <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filestorage">FileStorage</a>. To specify that this structure to which file binds on your hard drive you can use either its constructor or the <em>open()</em> function of this:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">string</span> <span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;I.xml&quot;</span><span class="p">;</span>
<span class="n">FileStorage</span> <span class="nf">fs</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FileStorage</span><span class="o">::</span><span class="n">WRITE</span><span class="p">);</span>
<span class="c1">//...</span>
<span class="n">fs</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FileStorage</span><span class="o">::</span><span class="n">READ</span><span class="p">);</span>
</pre></div>
</div>
<p>Either one of this you use the second argument is a constant specifying the type of operations you&#8217;ll be able to on them: WRITE, READ or APPEND. The extension specified in the file name also determinates the output format that will be used. The output may be even compressed if you specify an extension such as <em>.xml.gz</em>.</p>
<p>The file automatically closes when the <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filestorage">FileStorage</a> objects is destroyed. However, you may explicitly call for this by using the <em>release</em> function:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">fs</span><span class="p">.</span><span class="n">release</span><span class="p">();</span>                                       <span class="c1">// explicit close</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Input and Output of text and numbers.</strong> The data structure uses the same &lt;&lt; output operator that the STL library. For outputting any type of data structure we need first to specify its name. We do this by just simply printing out the name of this. For basic types you may follow this with the print of the value :</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;iterationNr&quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">100</span><span class="p">;</span>
</pre></div>
</div>
<p>Reading in is a simple addressing (via the [] operator) and casting operation or a read via the &gt;&gt; operator :</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="kt">int</span> <span class="n">itNr</span><span class="p">;</span>
<span class="n">fs</span><span class="p">[</span><span class="s">&quot;iterationNr&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">itNr</span><span class="p">;</span>
<span class="n">itNr</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">fs</span><span class="p">[</span><span class="s">&quot;iterationNr&quot;</span><span class="p">];</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Input/Output of OpenCV Data structures.</strong> Well these behave exactly just as the basic C++ types:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">Mat</span> <span class="n">R</span> <span class="o">=</span> <span class="n">Mat_</span><span class="o">&lt;</span><span class="n">uchar</span> <span class="o">&gt;::</span><span class="n">eye</span>  <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">Mat_</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;R&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">R</span><span class="p">;</span>                                      <span class="c1">// Write cv::Mat</span>
<span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;T&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">T</span><span class="p">;</span>

<span class="n">fs</span><span class="p">[</span><span class="s">&quot;R&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">R</span><span class="p">;</span>                                      <span class="c1">// Read cv::Mat</span>
<span class="n">fs</span><span class="p">[</span><span class="s">&quot;T&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">T</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Input/Output of vectors (arrays) and associative maps.</strong> As I mentioned beforehand, we can output maps and sequences (array, vector) too. Again we first print the name of the variable and then we have to specify if our output is either a sequence or map.</p>
<p>For sequence before the first element print the &#8220;[&#8221; character and after the last one the &#8220;]&#8221; character:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strings&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;[&quot;</span><span class="p">;</span>                              <span class="c1">// text - string sequence</span>
<span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;image1.jpg&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Awesomeness&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;baboon.jpg&quot;</span><span class="p">;</span>
<span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;]&quot;</span><span class="p">;</span>                                           <span class="c1">// close sequence</span>
</pre></div>
</div>
<p>For maps the drill is the same however now we use the &#8220;{&#8221; and &#8220;}&#8221; delimiter characters:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Mapping&quot;</span><span class="p">;</span>                              <span class="c1">// text - mapping</span>
<span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;{&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;One&quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">fs</span> <span class="o">&lt;&lt;</span>        <span class="s">&quot;Two&quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;}&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>To read from these we use the <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filenode">FileNode</a> and the <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filenodeiterator">FileNodeIterator</a> data structures. The [] operator of the <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filestorage">FileStorage</a> class returns a <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filenode">FileNode</a> data type. If the node is sequential we can use the <a class="reference external" href="http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#filenodeiterator">FileNodeIterator</a> to iterate through the items:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">FileNode</span> <span class="n">n</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s">&quot;strings&quot;</span><span class="p">];</span>                         <span class="c1">// Read string sequence - Get node</span>
<span class="k">if</span> <span class="p">(</span><span class="n">n</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="o">!=</span> <span class="n">FileNode</span><span class="o">::</span><span class="n">SEQ</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strings is not a sequence! FAIL&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">FileNodeIterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">n</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">it_end</span> <span class="o">=</span> <span class="n">n</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="c1">// Go through the node</span>
<span class="k">for</span> <span class="p">(;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">it_end</span><span class="p">;</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span><span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
<p>For maps you can use the [] operator again to acces the given item (or the &gt;&gt; operator too):</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">n</span> <span class="o">=</span> <span class="n">fs</span><span class="p">[</span><span class="s">&quot;Mapping&quot;</span><span class="p">];</span>                                <span class="c1">// Read mappings from a sequence</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Two  &quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">n</span><span class="p">[</span><span class="s">&quot;Two&quot;</span><span class="p">])</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;; &quot;</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;One  &quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">n</span><span class="p">[</span><span class="s">&quot;One&quot;</span><span class="p">])</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Read and write your own data structures.</strong> Suppose you have a data structure such as:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyData</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
      <span class="n">MyData</span><span class="p">()</span> <span class="o">:</span> <span class="n">A</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">X</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">id</span><span class="p">()</span> <span class="p">{}</span>
<span class="k">public</span><span class="o">:</span>   <span class="c1">// Data Members</span>
   <span class="kt">int</span> <span class="n">A</span><span class="p">;</span>
   <span class="kt">double</span> <span class="n">X</span><span class="p">;</span>
   <span class="n">string</span> <span class="n">id</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>It&#8217;s possible to serialize this through the OpenCV I/O XML/YAML interface (just as in case of the OpenCV data structures) by adding a read and a write function inside and outside of your class. For the inside part:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">write</span><span class="p">(</span><span class="n">FileStorage</span><span class="o">&amp;</span> <span class="n">fs</span><span class="p">)</span> <span class="k">const</span>                        <span class="c1">//Write serialization for this class</span>
<span class="p">{</span>
  <span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;{&quot;</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">A</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;X&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">X</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;id&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">id</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;}&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">read</span><span class="p">(</span><span class="k">const</span> <span class="n">FileNode</span><span class="o">&amp;</span> <span class="n">node</span><span class="p">)</span>                          <span class="c1">//Read serialization for this class</span>
<span class="p">{</span>
  <span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">node</span><span class="p">[</span><span class="s">&quot;A&quot;</span><span class="p">];</span>
  <span class="n">X</span> <span class="o">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">node</span><span class="p">[</span><span class="s">&quot;X&quot;</span><span class="p">];</span>
  <span class="n">id</span> <span class="o">=</span> <span class="p">(</span><span class="n">string</span><span class="p">)</span><span class="n">node</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then you need to add the following functions definitions outside the class:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">write</span><span class="p">(</span><span class="n">FileStorage</span><span class="o">&amp;</span> <span class="n">fs</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">MyData</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">x</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">fs</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">read</span><span class="p">(</span><span class="k">const</span> <span class="n">FileNode</span><span class="o">&amp;</span> <span class="n">node</span><span class="p">,</span> <span class="n">MyData</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="k">const</span> <span class="n">MyData</span><span class="o">&amp;</span> <span class="n">default_value</span> <span class="o">=</span> <span class="n">MyData</span><span class="p">())</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">default_value</span><span class="p">;</span>
<span class="k">else</span>
    <span class="n">x</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here you can observe that in the read section we defined what happens if the user tries to read a non-existing node. In this case we just return the default initialization value, however a more verbose solution would be to return for instance a minus one value for an object ID.</p>
<p>Once you added these four functions use the &gt;&gt; operator for write and the &lt;&lt; operator for read:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">MyData</span> <span class="nf">m</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">fs</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;MyData&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m</span><span class="p">;</span>                                <span class="c1">// your own data structures</span>
<span class="n">fs</span><span class="p">[</span><span class="s">&quot;MyData&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>                                 <span class="c1">// Read your own structure_</span>
</pre></div>
</div>
<p>Or to try out reading a non-existing read:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="n">fs</span><span class="p">[</span><span class="s">&quot;NonExisting&quot;</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>   <span class="c1">// Do not add a fs &lt;&lt; &quot;NonExisting&quot; &lt;&lt; m command for this to work</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;NonExisting = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="result">
<h2>Result<a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h2>
<p>Well mostly we just print out the defined numbers. On the screen of your console you could see:</p>
<div class="highlight-bash"><div class="highlight"><pre>Write Done.

Reading:
100image1.jpg
Awesomeness
baboon.jpg
Two  2<span class="p">;</span> One  1


<span class="nv">R</span> <span class="o">=</span> <span class="o">[</span>1, 0, 0<span class="p">;</span>
  0, 1, 0<span class="p">;</span>
  0, 0, 1<span class="o">]</span>
<span class="nv">T</span> <span class="o">=</span> <span class="o">[</span>0<span class="p">;</span> 0<span class="p">;</span> 0<span class="o">]</span>

<span class="nv">MyData</span> <span class="o">=</span>
<span class="o">{</span> <span class="nv">id</span> <span class="o">=</span> mydata1234, <span class="nv">X</span> <span class="o">=</span> 3.14159, <span class="nv">A</span> <span class="o">=</span> 97<span class="o">}</span>

Attempt to <span class="nb">read</span> NonExisting <span class="o">(</span>should initialize the data structure with its default<span class="o">)</span>.
<span class="nv">NonExisting</span> <span class="o">=</span>
<span class="o">{</span> <span class="nv">id</span> <span class="o">=</span> , <span class="nv">X</span> <span class="o">=</span> 0, <span class="nv">A</span> <span class="o">=</span> 0<span class="o">}</span>

Tip: Open up output.xml with a text editor to see the serialized data.
</pre></div>
</div>
<p>Nevertheless, it&#8217;s much more interesting what you may see in the output xml file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;opencv_storage&gt;</span>
<span class="nt">&lt;iterationNr&gt;</span>100<span class="nt">&lt;/iterationNr&gt;</span>
<span class="nt">&lt;strings&gt;</span>
  image1.jpg Awesomeness baboon.jpg<span class="nt">&lt;/strings&gt;</span>
<span class="nt">&lt;Mapping&gt;</span>
  <span class="nt">&lt;One&gt;</span>1<span class="nt">&lt;/One&gt;</span>
  <span class="nt">&lt;Two&gt;</span>2<span class="nt">&lt;/Two&gt;&lt;/Mapping&gt;</span>
<span class="nt">&lt;R</span> <span class="na">type_id=</span><span class="s">&quot;opencv-matrix&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;rows&gt;</span>3<span class="nt">&lt;/rows&gt;</span>
  <span class="nt">&lt;cols&gt;</span>3<span class="nt">&lt;/cols&gt;</span>
  <span class="nt">&lt;dt&gt;</span>u<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;data&gt;</span>
    1 0 0 0 1 0 0 0 1<span class="nt">&lt;/data&gt;&lt;/R&gt;</span>
<span class="nt">&lt;T</span> <span class="na">type_id=</span><span class="s">&quot;opencv-matrix&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;rows&gt;</span>3<span class="nt">&lt;/rows&gt;</span>
  <span class="nt">&lt;cols&gt;</span>1<span class="nt">&lt;/cols&gt;</span>
  <span class="nt">&lt;dt&gt;</span>d<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;data&gt;</span>
    0. 0. 0.<span class="nt">&lt;/data&gt;&lt;/T&gt;</span>
<span class="nt">&lt;MyData&gt;</span>
  <span class="nt">&lt;A&gt;</span>97<span class="nt">&lt;/A&gt;</span>
  <span class="nt">&lt;X&gt;</span>3.1415926535897931e+000<span class="nt">&lt;/X&gt;</span>
  <span class="nt">&lt;id&gt;</span>mydata1234<span class="nt">&lt;/id&gt;&lt;/MyData&gt;</span>
<span class="nt">&lt;/opencv_storage&gt;</span>
</pre></div>
</div>
<p>Or the YAML file:</p>
<div class="highlight-yaml"><div class="highlight"><pre>%YAML:1.0
iterationNr: 100
strings:
   - &quot;image1.jpg&quot;
   - Awesomeness
   - &quot;baboon.jpg&quot;
Mapping:
   One: 1
   Two: 2
R: !!opencv-matrix
   rows: 3
   cols: 3
   dt: u
   data: [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ]
T: !!opencv-matrix
   rows: 3
   cols: 1
   dt: d
   data: [ 0., 0., 0. ]
MyData:
   A: 97
   X: 3.1415926535897931e+000
   id: mydata1234
</pre></div>
</div>
<p>You may observe a runtime instance of this on the <a class="reference external" href="https://www.youtube.com/watch?v=A4yqVnByMMM">YouTube here</a> .</p>
<div align="center">
<iframe title="File Input and Output using XML and YAML files in OpenCV" width="560" height="349" src="https://www.youtube.com/embed/A4yqVnByMMM?rel=0&loop=1" frameborder="0" allowfullscreen align="middle"></iframe>
</div></div>
</div>


          </div>
          <div class="feedback">
              <h2>Help and Feedback</h2>
              You did not find what you were looking for?
              <ul>
                  
                  
                  
                  <li>Ask a question on the <a href="http://answers.opencv.org">Q&A forum</a>.</li>
                  <li>If you think something is missing or wrong in the documentation,
                  please file a <a href="http://code.opencv.org">bug report</a>.</li>
              </ul>
          </div>
        </div>
      </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/opencv-logo-white.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
      <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </p>
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">File Input and Output using XML and YAML files</a><ul>
<li><a class="reference internal" href="#goal">Goal</a></li>
<li><a class="reference internal" href="#source-code">Source code</a></li>
<li><a class="reference internal" href="#explanation">Explanation</a></li>
<li><a class="reference internal" href="#result">Result</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../discrete_fourier_transform/discrete_fourier_transform.html"
                        title="previous chapter">Discrete Fourier Transform</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../interoperability_with_OpenCV_1/interoperability_with_OpenCV_1.html"
                        title="next chapter">Interoperability with OpenCV 1</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/doc/tutorials/core/file_input_output_with_xml_yml/file_input_output_with_xml_yml.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../interoperability_with_OpenCV_1/interoperability_with_OpenCV_1.html" title="Interoperability with OpenCV 1"
             >next</a> |</li>
        <li class="right" >
          <a href="../discrete_fourier_transform/discrete_fourier_transform.html" title="Discrete Fourier Transform"
             >previous</a> |</li>
        <li><a href="../../../../index.html">OpenCV 2.4.13.7 documentation</a> &raquo;</li>
          <li><a href="../../tutorials.html" >OpenCV Tutorials</a> &raquo;</li>
          <li><a href="../table_of_content_core/table_of_content_core.html" ><em>core</em> module. The Core Functionality</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2014, opencv dev team.
      Last updated on Jul 12, 2018.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>